window.__require=function e(t,l,i){function o(s,n){if(!l[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var h="function"==typeof __require&&__require;if(!n&&h)return h(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var C=l[s]={exports:{}};t[s][0].call(C.exports,function(e){return o(t[s][1][e]||e)},C,C.exports,e,t,l,i)}return l[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<i.length;s++)o(i[s]);return o}({Cell:[function(e,t,l){"use strict";cc._RF.push(t,"93f68rzHqxJY5it62LGw3mz","Cell");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])})(e,t)},function(e,t){function l(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(l.prototype=t.prototype,new l)}),r=this&&this.__decorate||function(e,t,l,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,l):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,l,i);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(s=(r<3?o(s):r>3?o(t,l,s):o(t,l))||s);return r>3&&s&&Object.defineProperty(t,l,s),s};Object.defineProperty(l,"__esModule",{value:!0}),l.Cell=void 0;var s=cc._decorator,n=s.ccclass,c=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.generator=!1,t.irow=0,t.jcolumn=0,t.TypeColor=0,t.typeCell=0,t._circle=null,t.wasSelectCircle=!1,t.wasClick=!1,t.countClick=0,t}return o(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.wasClickSet,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.moveCircle,this)},t.prototype.wasClickSet=function(){null!=this._circle&&(this.wasClick=!0,cc.log("clicedInCell"),this.selectCircle())},t.prototype.start=function(){},t.prototype.moveCircle=function(){cc.log("circle is move")},t.prototype.setGrayColor=function(){this.node.color=new cc.Color(197,197,197)},t.prototype.setWhiteColor=function(){this.node.color=new cc.Color(255,255,255)},t.prototype.setColorInType=function(){1==this.typeCell&&this.setWhiteColor()},t.prototype.selectCircle=function(){null!=this._circle&&(this.countClick++,this.countClick%2==0?(this.wasSelectCircle=!1,this.wasClick=!1,this.setNormalSize(),this.node.dispatchEvent(new cc.Event.EventCustom("wasTwoClickOnCell",!0))):(this.wasSelectCircle=!0,this.node.dispatchEvent(new cc.Event.EventCustom("wasClickOnCell",!0)),this._circle.setContentSize(this.node.getContentSize())))},t.prototype.setNormalSize=function(){if(null!=this._circle){var e=cc.size(this.node.getContentSize());this._circle.setContentSize(e.height-15,e.width-15)}},t.prototype.mousedown=function(){this.wasClick=!0,this.destroyCircle()},t.prototype.destroyCircle=function(){null!=this._circle&&(this._circle.destroy(),this._circle=null,this.node.dispatchEvent(new cc.Event.EventCustom("clickOnCellForDestroyCircle",!0)))},t.prototype.circleIsNotNull=function(){return null!=this._circle},t.prototype.CellIsNotNull=function(){return null!=this},r([c],t.prototype,"generator",void 0),r([n],t)}(cc.Component);l.Cell=h,cc._RF.pop()},{}],CircleEnums:[function(e,t,l){"use strict";cc._RF.push(t,"3b838rchfZDZ7EUO6w1VHtd","CircleEnums"),Object.defineProperty(l,"__esModule",{value:!0}),l.tipeCircle=l.typeColorCircle=void 0,function(e){e[e.blue=0]="blue",e[e.green=1]="green",e[e.orange=2]="orange",e[e.reed=3]="reed",e[e.violet=4]="violet",e[e.yellow=5]="yellow"}(l.typeColorCircle||(l.typeColorCircle={})),function(e){e[e.normal=0]="normal",e[e.lightningHorizont=1]="lightningHorizont",e[e.lightningVertical=2]="lightningVertical",e[e.rainbowBall=3]="rainbowBall",e[e.lightningVerticalAndlightningHorizont=4]="lightningVerticalAndlightningHorizont"}(l.tipeCircle||(l.tipeCircle={})),cc._RF.pop()},{}],Circle:[function(e,t,l){"use strict";cc._RF.push(t,"7dbc7eE2d1AgKeAG34Dn73t","Circle");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])})(e,t)},function(e,t){function l(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(l.prototype=t.prototype,new l)}),r=this&&this.__decorate||function(e,t,l,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,l):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,l,i);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(s=(r<3?o(s):r>3?o(t,l,s):o(t,l))||s);return r>3&&s&&Object.defineProperty(t,l,s),s};Object.defineProperty(l,"__esModule",{value:!0}),l.Circle=void 0;var s=cc._decorator,n=s.ccclass,c=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprite=[],t.circlesTipe=[],t.CircleType=0,t.inMove=!1,t}return o(t,e),t.prototype.onLoad=function(){this.setRandomColor()},t.prototype.setRandomColor=function(){var e=this.node.getComponent(cc.Sprite);this.randomNumber=Math.floor(Math.random()*Math.floor(this.sprite.length)),e.spriteFrame=this.sprite[this.randomNumber],this.setColorTipe(this.randomNumber)},t.prototype.setTipe=function(e){this.CircleType=e,e>0&&(4==e?(this.setTipeTMP(1),this.setTipeTMP(2)):this.setTipeTMP(e-1))},t.prototype.setTipeTMP=function(e){var t=cc.instantiate(this.circlesTipe[e]);t.setParent(this.node),t.setContentSize(this.node.getContentSize()),t.setPosition(0,0)},t.prototype.setColorTipe=function(e){var t=this.node.getComponent(cc.Sprite);this.CircleTypeColor=e,t.spriteFrame=this.sprite[e]},r([c(cc.SpriteFrame)],t.prototype,"sprite",void 0),r([c(cc.Prefab)],t.prototype,"circlesTipe",void 0),r([c],t.prototype,"CircleTypeColor",void 0),r([n],t)}(cc.Component);l.Circle=h,cc._RF.pop()},{}],ClassHelpers:[function(e,t,l){"use strict";cc._RF.push(t,"713b5j6l2pMO79Lgw9EqBJF","ClassHelpers"),Object.defineProperty(l,"__esModule",{value:!0}),l.CheckerBoolean=void 0;var i=function(){function e(){}return e.checkTwoBoolean=function(e,t){return e&t},e.checkTrheeBoolean=function(e,t,l){return e&t&l},e.EqualsTwoObj=function(e,t){return e===t},e.EqualsTrheeObj=function(e,t,l){return e===t&&t===l},e}();l.CheckerBoolean=i,cc._RF.pop()},{}],GameField:[function(e,t,l){"use strict";cc._RF.push(t,"bfa611mBN1Ato8bmVTiNiGw","GameField");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])})(e,t)},function(e,t){function l(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(l.prototype=t.prototype,new l)}),r=this&&this.__decorate||function(e,t,l,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,l):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,l,i);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(s=(r<3?o(s):r>3?o(t,l,s):o(t,l))||s);return r>3&&s&&Object.defineProperty(t,l,s),s};Object.defineProperty(l,"__esModule",{value:!0}),l.GameField=void 0;var s=e("./Circle"),n=e("./Cell"),c=e("./ClassHelpers"),h=e("./CircleEnums"),C=e("./CircleEnums"),p=cc._decorator,a=p.ccclass,u=p.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Circle=null,t.Cell=null,t.needRandomVoidCell=!0,t.ChangeForCreateAnActiveCell=25,t.iter=.1,t.StartCellPosX=-150,t.StartCellPosY=250,t.lenghtCell=120,t.widthCell=120,t.countCircle=0,t.countProgressStep=0,t.previousCountCircle=0,t.busterClick=!1,t.Cells=[[,,,,,,,,],[,,,,,,,,],[,,,,,,,,],[,,,,,,,,],[,,,,,,,,],[,,,,,,,,],[,,,,,,,,],[,,,,,,,,]],t.currentI_cell_click=0,t.currentJ_cell_click=0,t.timeForCheckFild=0,t.oneCheckField=!0,t.cellExist=!1,t.tmpCountCircle=0,t.horizont=!1,t.vertical=!1,t.goDestroyThreeInArow=!1,t.destroyExisted=!1,t.animationStart=!0,t}return o(t,e),t.prototype.onLoad=function(){this.node.on("wasClickOnCell",this.workWithClickedCell,this),this.node.on("wasTwoClickOnCell",this.workWithTwoClickedCell,this),this.timeForCheckFild=this.Cells.length*this.iter+.1},t.prototype.start=function(){this.createCells(),this.setTypeCellsOnIandJ(4,0,this.Cells.length,4,1),this.CreateCircles()},t.prototype.onEnable=function(){this.createCells(),this.setTypeCellsOnIandJ(4,0,this.Cells.length,4,1),this.CreateCircles(),this.destroyTipeColors=new Array(Object.keys(C.typeColorCircle).length);for(var e=0;e<this.destroyTipeColors.length;e++)this.destroyTipeColors[e]=0},t.prototype.onDisable=function(){this.DestroyCircles()},t.prototype.workWithClickedCell=function(){this.currentCell=this.getClickCell(),this.currentCell===this.prewCell&&(this.prewCell=null),null!=this.currentCell&&(this.buster()||(this.setSelectPrewCell(),null!=this.prewCell&&(this.tmpPrewCell=this.prewCell,this.checkNeighboringCell()),this.prewCell=this.currentCell))},t.prototype.workWithTwoClickedCell=function(){cc.log("clear cells")},t.prototype.checkNeighboringCell=function(){this.prewCell._circle.getComponent(s.Circle).CircleTypeColor!==this.currentCell._circle.getComponent(s.Circle).CircleTypeColor&&this.prewCell!==this.currentCell&&null!=this.prewCell._circle&&null!=this.currentI_cell_click&&(this.prewCell.irow+1==this.currentCell.irow&&this.prewCell.jcolumn==this.currentCell.jcolumn||this.prewCell.irow-1==this.currentCell.irow&&this.prewCell.jcolumn==this.currentCell.jcolumn||this.prewCell.irow==this.currentCell.irow&&this.prewCell.jcolumn+1==this.currentCell.jcolumn||this.prewCell.irow==this.currentCell.irow&&this.prewCell.jcolumn-1==this.currentCell.jcolumn)&&(this.node.dispatchEvent(new cc.Event.EventCustom("setBlockTouch",!0)),this.swapCircles(this.prewCell,this.currentCell),this.needCheckFieldAfterSwapCircle())},t.prototype.needCheckFieldAfterSwapCircle=function(){this.scheduleOnce(function(){this.node.dispatchEvent(new cc.Event.EventCustom("needCheckField",!0)),this.setCellNoClick(this.prewCell),this.setCellNoClick(this.currentCell),this.oneCheckField=!0},this.iter+this.iter+this.iter),this.scheduleOnce(function(){this.destroyExisted?(cc.log("countProgressStep"),this.node.dispatchEvent(new cc.Event.EventCustom("setUnBlockTouch",!0)),this.node.dispatchEvent(new cc.Event.EventCustom("countProgressStep",!0)),this.prewCell=null,this.currentCell=null,this.tmpPrewCell=null):(cc.log("comeBackCircle"),this.node.dispatchEvent(new cc.Event.EventCustom("setUnBlockTouch",!0)),this.swapCircles(this.currentCell,this.tmpPrewCell),this.setCellNoClick(this.tmpPrewCell),this.setCellNoClick(this.currentCell),this.prewCell=null,this.currentCell=null,this.tmpPrewCell=null)},this.timeForCheckFild)},t.prototype.swapCircles=function(e,t){cc.log("swapCirle"),this.animateMoveCircle(e,t),this.animateMoveCircle(t,e);var l=t._circle;t._circle=e._circle,e._circle=l,this.setCellNoClick(e),this.setCellNoClick(t)},t.prototype.setCellNoClick=function(e){e.countClick=0,e.wasSelectCircle=!1,e.wasClick=!1,e.setNormalSize()},t.prototype.animateMoveCircle=function(e,t){null!=e&&null!=t&&cc.tween(e._circle).parallel(cc.tween().to(this.iter,{scale:1}),cc.tween().to(this.iter,{position:t.node.position})).call(function(){cc.log("finish move")}).start()},t.prototype.setBuster=function(){cc.log("Buster Set"),this.busterClick=!0},t.prototype.buster=function(){return!(!this.busterClick||null==this.currentCell||(this.startTypeDestroer(this.currentCell),this.animateDestroyCircle(this.currentCell),this.setCellNoClick(this.currentCell),this.busterClick=!1,this.eventDestoyArow(),this.currentCell=null,this.node.dispatchEvent(new cc.Event.EventCustom("countProgressStep",!0)),0))},t.prototype.setSelectPrewCell=function(){null!=this.prewCell&&this.prewCell!==this.currentCell&&this.prewCell.wasSelectCircle&&this.prewCell.selectCircle()},t.prototype.setSelectCurrentCell=function(){null!=this.currentCell&&this.currentCell.wasSelectCircle&&this.currentCell.selectCircle()},t.prototype.getClickCell=function(){for(var e=0;e<this.Cells.length;e++)for(var t=0;t<this.Cells[e].length;t++)if(this.Cells[e][t].wasClick)return this.Cells[e][t].wasClick=!1,cc.log("cliced"),this.Cells[e][t];return null},t.prototype.clickDestroyCircleInCell=function(){this.countCircle--,this.node.dispatchEvent(new cc.Event.EventCustom("setPoint",!0)),this.allCirclesMove()},t.prototype.createOneLineCircles=function(){for(var e=0;e<this.Cells[0].length;e++)this.createCircle(this.Cells[0][e]);this.allCirclesMove(),this.oneCheckField&&(this.oneCheckField=!1,this.needCheckField())},t.prototype.needCheckField=function(){this.scheduleOnce(function(){this.node.dispatchEvent(new cc.Event.EventCustom("needCheckField",!0)),this.oneCheckField=!0},this.timeForCheckFild)},t.prototype.checkLine=function(){this.destroyExisted=!1,this.InArow(),cc.log("fied fullness"),this.node.dispatchEvent(new cc.Event.EventCustom("setUnBlockTouch",!0))},t.prototype.createCells=function(){for(var e,t=0,l=0,i=0;i<this.Cells.length;i++){for(var o=0;o<this.Cells[i].length;o++)(e=cc.instantiate(this.Cell)).setContentSize(this.lenghtCell,this.widthCell),e.setParent(this.node),e.setPosition(this.StartCellPosX+t,this.StartCellPosY+l),this.Cells[i][o]=e.getComponent(n.Cell),o%2!=0&&i%2==0&&this.Cells[i][o].setGrayColor(),o%2==0&&i%2!=0&&this.Cells[i][o].setGrayColor(),this.needRandomVoidCell&&this.createAnyTypeCell(this.Cells[i][o],1),this.Cells[i][o].jcolumn=i,this.Cells[i][o].irow=o,t+=this.lenghtCell;t=0,l-=this.widthCell}},t.prototype.createAnyTypeCell=function(e,t){1==Math.floor(Math.random()*this.ChangeForCreateAnActiveCell+1)&&(e.typeCell=t,e.setColorInType())},t.prototype.setTypeCellsOnIandJ=function(e,t,l,i,o){for(var r=t;r<i;r++)for(var s=e;s<l;s++)this.Cells[r][s].typeCell=o,this.Cells[r][s].setColorInType()},t.prototype.CreateCircles=function(){for(var e=0;e<this.Cells.length;e++)for(var t=0;t<this.Cells[e].length;t++)0==this.Cells[e][t].typeCell&&this.createCircle(this.Cells[e][t]);this.node.dispatchEvent(new cc.Event.EventCustom("needCheckField",!0))},t.prototype.DestroyCircles=function(){for(var e=0;e<this.Cells.length;e++)for(var t=0;t<this.Cells[e].length;t++)this.Cells[e][t].circleIsNotNull()&&(this.Cells[e][t]._circle.destroy(),this.Cells[e][t]._circle=null)},t.prototype.createCircle=function(e){e.circleIsNotNull()||0!=e.typeCell||(e._circle=cc.instantiate(this.Circle),e._circle.setParent(this.node),e._circle.setPosition(e.node.position),e._circle.setContentSize(this.lenghtCell-15,this.widthCell-15),this.countCircle++)},t.prototype.allCirclesMove=function(){for(var e=0;e<this.Cells.length;e++)for(var t=0;t<this.Cells[e].length;t++)this.Cells[e][t].CellIsNotNull()&&(this.Cells[e][t].circleIsNotNull()||0!=this.Cells[e][t].typeCell||(0==e&&this.scheduleOnce(function(){this.node.dispatchEvent(new cc.Event.EventCustom("moveCircleEnd",!0))},this.iter),e>=1&&this.swapCircleInCell(t,e,t,e-1),this.cellExist||(e>=1&&t<this.Cells[e].length-1&&(1==Math.floor(Math.random()*Math.floor(2))?(this.swapCircleInCell(t,e,t-1,e-1),this.cellExist||this.swapCircleInCell(t,e,t+1,e-1)):this.swapCircleInCell(t,e,t+1,e-1),this.cellExist||this.swapCircleInCell(t,e,t-1,e-1)),0==t&&e>=1&&this.swapCircleInCell(t,e,t+1,e-1),t==this.Cells[e].length-1&&e>=1&&this.swapCircleInCell(t,e,t-1,e-1))))},t.prototype.swapCircleInCell=function(e,t,l,i){if(this.validateCircleMove(e,t,l,i))return this.Cells[t][e]._circle=this.Cells[i][l]._circle,this.Cells[i][l]._circle=null,this.moveCircle(this.Cells[t][e]._circle,this.Cells[t][e].node.position),void(this.cellExist=!0);this.cellExist=!1},t.prototype.validateCircleMove=function(e,t,l,i){return!!(c.CheckerBoolean.checkTwoBoolean(this.Cells[t][e].CellIsNotNull(),null!=this.Cells[i][l])&&c.CheckerBoolean.checkTwoBoolean(0==this.Cells[t][e].typeCell,0==this.Cells[i][l].typeCell)&&c.CheckerBoolean.checkTwoBoolean(null==this.Cells[t][e]._circle,null!=this.Cells[i][l]._circle))},t.prototype.moveCircle=function(e,t){var l=this,i=e.getComponent(s.Circle);i.inMove=!0,cc.tween(e).parallel(cc.tween().to(this.iter,{scale:1}),cc.tween().to(this.iter,{position:t})).call(function(){l.node.dispatchEvent(new cc.Event.EventCustom("moveCircleEnd",!0)),i.inMove=!1}).start()},t.prototype.fieldOnFilledWithCircles=function(){for(var e=0,t=0;t<this.Cells[0].length;t++)for(var l=0;l<this.Cells[t].length;l++)c.CheckerBoolean.checkTwoBoolean(0==this.Cells[t][l].typeCell,this.Cells[t][l].circleIsNotNull())&&this.Cells[t][l]._circle.getComponent(s.Circle).inMove&&e++;return cc.log(0),cc.log(e),!1},t.prototype.InArow=function(){for(var e=0;e<this.Cells.length;e++)for(var t=0;t<this.Cells[e].length;t++)this.goDestroyThreeInArow=!0,e>=2&&(this.vertical=!1,this.horizont=!0,this.InArowTmp(t,e,t,e-1,t,e-2)),t<this.Cells[e].length-2&&(this.horizont=!1,this.vertical=!0,this.InArowTmp(t,e,t+1,e,t+2,e))},t.prototype.InArowTmp=function(e,t,l,i,o,r){if(null!=this.Cells[t][e]&&null!=this.Cells[i][l]&&null!=this.Cells[r][o]){var n=c.CheckerBoolean.checkTwoBoolean(0==this.Cells[t][e].typeCell,0==this.Cells[i][l].typeCell),h=c.CheckerBoolean.checkTwoBoolean(n,0==this.Cells[r][o].typeCell);if(!h)return;if(n=c.CheckerBoolean.checkTwoBoolean(this.Cells[t][e].circleIsNotNull(),this.Cells[i][l].circleIsNotNull()),!(h=c.CheckerBoolean.checkTwoBoolean(n,this.Cells[r][o].circleIsNotNull())))return;if(!c.CheckerBoolean.EqualsTrheeObj(this.Cells[t][e]._circle.getComponent(s.Circle).CircleTypeColor,this.Cells[i][l]._circle.getComponent(s.Circle).CircleTypeColor,this.Cells[r][o]._circle.getComponent(s.Circle).CircleTypeColor))return;this.vertical&&(e<this.Cells[t].length-4&&this.createRainbowBall(e,t,l,i,o,r,r,o+1,r,o+2,3),e<this.Cells[t].length-3&&this.goDestroyThreeInArow&&this.createLightning(e,t,l,i,o,r,r,o+1,2)),this.horizont&&(t>=4&&this.createRainbowBall(e,t,l,i,o,r,r-1,o,r-2,o,3),t>=3&&this.goDestroyThreeInArow&&this.createLightning(e,t,l,i,o,r,r-1,o,1)),this.goDestroyThreeInArow&&(this.check3Circle(this.Cells[t][e],this.Cells[i][l],this.Cells[r][o]),this.eventDestoyArow())}},t.prototype.createRainbowBall=function(e,t,l,i,o,r,n,h,C,p,a){if(null!=this.Cells[n][h]&&null!=this.Cells[C][p]){var u=c.CheckerBoolean.checkTwoBoolean(0==this.Cells[n][h].typeCell,this.Cells[n][h].circleIsNotNull()),y=c.CheckerBoolean.checkTwoBoolean(0==this.Cells[C][p].typeCell,this.Cells[C][p].circleIsNotNull());c.CheckerBoolean.checkTwoBoolean(u,y)&&c.CheckerBoolean.EqualsTrheeObj(this.Cells[r][o]._circle.getComponent(s.Circle).CircleTypeColor,this.Cells[n][h]._circle.getComponent(s.Circle).CircleTypeColor,this.Cells[C][p]._circle.getComponent(s.Circle).CircleTypeColor)&&(cc.log("RainbowCreate"),this.Cells[t][e]._circle.getComponent(s.Circle).setTipe(a),cc.log(this.Cells[t][e]._circle.getComponent(s.Circle).CircleType),this.check3Circle(this.Cells[i][l],this.Cells[r][o],this.Cells[n][h]),this.startCheckCircleForDestroy(this.Cells[C][p]),this.goDestroyThreeInArow=!1,this.eventDestoyArow())}},t.prototype.createLightning=function(e,t,l,i,o,r,n,h,C){null!=this.Cells[n][h]&&c.CheckerBoolean.checkTwoBoolean(0==this.Cells[n][h].typeCell,this.Cells[n][h].circleIsNotNull())&&c.CheckerBoolean.EqualsTwoObj(this.Cells[r][o]._circle.getComponent(s.Circle).CircleTypeColor,this.Cells[n][h]._circle.getComponent(s.Circle).CircleTypeColor)&&(this.Cells[t][e]._circle.getComponent(s.Circle).setTipe(C),this.check3Circle(this.Cells[i][l],this.Cells[r][o],this.Cells[n][h]),this.goDestroyThreeInArow=!1,this.eventDestoyArow())},t.prototype.destroyRainbowBall=function(e,t){for(var l=0;l<this.Cells.length;l++)for(var i=0;i<this.Cells[l].length;i++){if(!this.Cells[l][i].circleIsNotNull())return;var o=this.Cells[l][i]._circle.getComponent(s.Circle);e!=this.Cells[l][i]&&t.CircleTypeColor===o.CircleTypeColor&&(t.CircleType===o.CircleType?this.animateDestroyCircle(this.Cells[l][i]):this.startCheckCircleForDestroy(this.Cells[l][i]))}},t.prototype.destroyLightningVertical=function(e,t){for(var l=e.jcolumn,i=0;i<this.Cells[l].length;i++){if(e!=this.Cells[l][i]||this.Cells[l][i].CellIsNotNull())return;if(!this.Cells[l][i].circleIsNotNull())return;var o=this.Cells[l][i]._circle.getComponent(s.Circle);t.CircleType===o.CircleType?this.animateDestroyCircle(this.Cells[l][i]):this.startCheckCircleForDestroy(this.Cells[l][i])}},t.prototype.destroyLightningHorizont=function(e,t){for(var l=e.irow,i=(t.getComponent(s.Circle),0);i<this.Cells.length;i++){if(e!=this.Cells[i][l]||null!=this.Cells[i][l])return;if(this.Cells[i][l].circleIsNotNull())var o=this.Cells[i][l]._circle.getComponent(s.Circle);if(null==o)return;t.CircleType===o.CircleType?this.animateDestroyCircle(this.Cells[i][l]):this.startCheckCircleForDestroy(this.Cells[i][l])}},t.prototype.destroylightningVerticalAndlightningHorizont=function(e,t){this.destroyLightningVertical(e,t),this.destroyLightningHorizont(e,t)},t.prototype.check3Circle=function(e,t,l){this.startCheckCircleForDestroy(e),this.startCheckCircleForDestroy(t),this.startCheckCircleForDestroy(l)},t.prototype.startCheckCircleForDestroy=function(e){this.startTypeDestroer(e),this.animateDestroyCircle(e)},t.prototype.startTypeDestroer=function(e){if(e.circleIsNotNull()){var t=e._circle.getComponent(s.Circle);switch(t.CircleType){case h.tipeCircle.lightningVerticalAndlightningHorizont:this.destroylightningVerticalAndlightningHorizont(e,t);break;case h.tipeCircle.rainbowBall:this.destroyRainbowBall(e,t);break;case h.tipeCircle.lightningVertical:this.destroyLightningVertical(e,t);break;case h.tipeCircle.lightningHorizont:this.destroyLightningHorizont(e,t);break;case h.tipeCircle.normal:this.animateDestroyCircle(e)}}},t.prototype.destroyEveryCircles=function(){for(var e=0;e<this.Cells.length;e++)for(var t=0;t<this.Cells[e].length;t++)this.animateDestroyCircle(this.Cells[e][t]);this.scheduleOnce(function(){this.node.dispatchEvent(new cc.Event.EventCustom("destroyCircles",!0))},this.iter+.1),this.scheduleOnce(function(){this.node.dispatchEvent(new cc.Event.EventCustom("needCheckField",!0))},4*(this.iter+.2))},t.prototype.eventDestoyArow=function(){this.scheduleOnce(function(){this.node.dispatchEvent(new cc.Event.EventCustom("setBlockTouch",!0)),this.node.dispatchEvent(new cc.Event.EventCustom("destroyCircles",!0)),this.destroyExisted=!0},this.iter+this.iter)},t.prototype.animateDestroyCircle=function(e){var t=this;null!=e&&cc.tween(e._circle).parallel(cc.tween().to(this.iter,{scale:0}),cc.tween().to(this.iter,{})).call(function(){null!=e._circle&&(t.countCircle--,t.getTypeDestroyCircle(e._circle.getComponent(s.Circle)),t.node.dispatchEvent(new cc.Event.EventCustom("setPoint",!0)),e._circle.destroy(),e._circle=null)}).start()},t.prototype.getTypeDestroyCircle=function(e){this.destroyTipeColors[e.CircleTypeColor]++,cc.log(this.destroyTipeColors[e.CircleTypeColor]),this.node.dispatchEvent(new cc.Event.EventCustom("setDestroyCirclesType_",!0))},r([u(cc.Prefab)],t.prototype,"Circle",void 0),r([u(cc.Prefab)],t.prototype,"Cell",void 0),r([u],t.prototype,"needRandomVoidCell",void 0),r([u],t.prototype,"ChangeForCreateAnActiveCell",void 0),r([u],t.prototype,"iter",void 0),r([u],t.prototype,"StartCellPosX",void 0),r([u],t.prototype,"StartCellPosY",void 0),r([u],t.prototype,"lenghtCell",void 0),r([u],t.prototype,"widthCell",void 0),r([a],t)}(cc.Component);l.GameField=y,cc._RF.pop()},{"./Cell":"Cell","./Circle":"Circle","./CircleEnums":"CircleEnums","./ClassHelpers":"ClassHelpers"}],GamesController:[function(e,t,l){"use strict";cc._RF.push(t,"e906eWDGftIDL9q6NIO0kDr","GamesController");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])})(e,t)},function(e,t){function l(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(l.prototype=t.prototype,new l)}),r=this&&this.__decorate||function(e,t,l,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,l):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,l,i);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(s=(r<3?o(s):r>3?o(t,l,s):o(t,l))||s);return r>3&&s&&Object.defineProperty(t,l,s),s};Object.defineProperty(l,"__esModule",{value:!0}),l.GameController=void 0;var s=e("./Circle"),n=e("./GameField"),c=cc._decorator,h=c.ccclass,C=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.countTypeAndMove=12,t.allpoints=0,t.taskType=null,t.taskpoints=0,t.currentMove=null,t.movepoints=0,t.testGame=!0,t.textPoint=null,t.gameField=null,t.gameOver=null,t.gameWon=null,t.typeTask=null,t.testGameText=null,t.blockField=null,t}return o(t,e),t.prototype.onLoad=function(){this.taskpoints=Number(this.taskType.string),this.movepoints=Number(this.currentMove.string),this.node.on("moveCircleEnd",this.gameField.createOneLineCircles,this.gameField),this.node.on("moveCircleEnd",function(e){e.stopPropagation()}),this.node.on("clickOnCellForDestroyCircle",this.gameField.clickDestroyCircleInCell,this.gameField),this.node.on("clickOnCellForDestroyCircle",function(e){e.stopPropagation()}),this.node.on("destroyCircles",this.gameField.allCirclesMove,this.gameField),this.node.on("destroyCircles",function(e){e.stopPropagation()}),this.node.on("needCheckField",this.gameField.checkLine,this.gameField),this.node.on("needCheckField",function(e){e.stopPropagation()}),this.node.on("setPoint",this.setPoint,this),this.node.on("setPoint",function(e){e.stopPropagation()}),this.node.on("getDestroyCirclesType",this.gameField.getTypeDestroyCircle,this.gameField),this.node.on("getDestroyCirclesType",function(e){e.stopPropagation()}),this.node.on("setDestroyCirclesType_",this.setTypeDestroyCircle,this),this.node.on("setDestroyCirclesType_",function(e){e.stopPropagation()}),this.node.on("countProgressStep",this.countProgressStep,this),this.node.on("countProgressStep",function(e){e.stopPropagation()}),this.node.on("countProgressDestrCirles",this.countProgressStep,this),this.node.on("countProgressDestrCirles",function(e){e.stopPropagation()})},t.prototype.setPoint=function(){this.allpoints+=1,this.textPoint.string=this.allpoints.toString()},t.prototype.countProgressStep=function(){this.movepoints--,cc.log(this.movepoints),this.currentMove.string=String(this.movepoints),this.testGame||0==this.movepoints&&(this.gameOver.active=!0)},t.prototype.progressTargetDestoyCircle=function(){var e=this.typeTask.getComponent(s.Circle),t=this.countTypeAndMove-this.gameField.destroyTipeColors[e.CircleTypeColor];this.taskType.string=String(t),this.testGame||t<=0&&(this.gameWon.active=!0)},t.prototype.gameOverNodeDeActivate=function(){this.gameOver.active=!1},t.prototype.gameWonNodeDeActivate=function(){this.gameWon.active=!1},t.prototype.CheckGameOverIfColorChallengeIsComplete=function(){},t.prototype.RestartGame=function(){this.gameField.node.active=!1,this.gameField.node.active=!0,this.allpoints=1,this.textPoint.string=this.allpoints.toString(),this.movepoints=this.countTypeAndMove,this.taskType.string=this.countTypeAndMove.toString(),this.currentMove.string=this.countTypeAndMove.toString(),this.typeTask.getComponent(s.Circle).setRandomColor()},t.prototype.setTypeDestroyCircle=function(){this.progressTargetDestoyCircle()},r([C],t.prototype,"countTypeAndMove",void 0),r([C(cc.Label)],t.prototype,"taskType",void 0),r([C(cc.Label)],t.prototype,"currentMove",void 0),r([C],t.prototype,"testGame",void 0),r([C(cc.Label)],t.prototype,"textPoint",void 0),r([C(n.GameField)],t.prototype,"gameField",void 0),r([C(cc.Node)],t.prototype,"gameOver",void 0),r([C(cc.Node)],t.prototype,"gameWon",void 0),r([C(cc.Node)],t.prototype,"typeTask",void 0),r([C(cc.Node)],t.prototype,"testGameText",void 0),r([C(cc.Node)],t.prototype,"blockField",void 0),r([h],t)}(cc.Component);l.GameController=p,cc._RF.pop()},{"./Circle":"Circle","./GameField":"GameField"}]},{},["Cell","Circle","CircleEnums","ClassHelpers","GameField","GamesController"]);